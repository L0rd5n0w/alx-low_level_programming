This is C at its finest
